\hypertarget{usr-lcd-control_8c}{\section{/home/pi/\+Sys\+Prog/lcd-\/driver/usr-\/lcd-\/control.c File Reference}
\label{usr-lcd-control_8c}\index{/home/pi/\+Sys\+Prog/lcd-\/driver/usr-\/lcd-\/control.\+c@{/home/pi/\+Sys\+Prog/lcd-\/driver/usr-\/lcd-\/control.\+c}}
}


a linux user space program that communicates with the hd44780 linux kernel module (L\+K\+M). to work with the device the /dev/hd44780 must be called  


{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$fcntl.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$ctype.\+h$>$}\\*
{\ttfamily \#include \char`\"{}ioctl\+\_\+header.\+h\char`\"{}}\\*
Include dependency graph for usr-\/lcd-\/control.c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{usr-lcd-control_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{usr-lcd-control_8c_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
a linux user space program that communicates with the hd44780 linux kernel module (L\+K\+M). to work with the device the /dev/hd44780 must be called 

\begin{DoxyAuthor}{Author}
Daniel Obermaier 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
02.\+06.\+2016 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}


\subsection{Function Documentation}
\hypertarget{usr-lcd-control_8c_a3c04138a5bfe5d72780bb7e82a18e627}{\index{usr-\/lcd-\/control.\+c@{usr-\/lcd-\/control.\+c}!main@{main}}
\index{main@{main}!usr-\/lcd-\/control.\+c@{usr-\/lcd-\/control.\+c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{usr-lcd-control_8c_a3c04138a5bfe5d72780bb7e82a18e627}

\begin{DoxyCode}
22                                \{
23 
24 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char}* devname = \textcolor{stringliteral}{"/dev/hd44780"};
25 
26 \textcolor{keywordtype}{int} ret = 0;
27 \textcolor{keywordtype}{char} buff[128] = \textcolor{stringliteral}{""};
28 \textcolor{keywordtype}{int} \hyperlink{hd44780_8c_a8910285a0352a5c710e65ec9ecbe32a1}{dev} = 0;
29 
30 \textcolor{keywordflow}{if}(argc != 2)\{ \textcolor{comment}{/*argc should be 2 for correct execution*/}
31     printf(\textcolor{stringliteral}{"usage:  <filename> <string>\(\backslash\)n"});
32 \}
33 \textcolor{keywordflow}{else}\{   
34     \textcolor{keywordtype}{int} dev = open(devname, O\_WRONLY);  \textcolor{comment}{//open device file -> WRITE ONLY}
35     
36     ret = write(dev, \textcolor{stringliteral}{"                                "}, 32);   \textcolor{comment}{//clear display}
37     \textcolor{keywordflow}{if}(dev == -1)\{
38         perror(\textcolor{stringliteral}{"can't open device file\(\backslash\)n"});
39         \textcolor{keywordflow}{return} -EIO;
40     \}
41 
42     ret = write(dev, argv[1], 128);     \textcolor{comment}{//write string to device}
43 
44     \textcolor{keywordflow}{if}(ret < 0)\{
45         perror(\textcolor{stringliteral}{"cant write to devicefile\(\backslash\)n"});
46         \textcolor{keywordflow}{return} EIO;
47     \}
48 \}
49 
50 close(dev);     \textcolor{comment}{//close device afterwards}
51 
52 \textcolor{keywordflow}{return} 0;
53 \}
\end{DoxyCode}
